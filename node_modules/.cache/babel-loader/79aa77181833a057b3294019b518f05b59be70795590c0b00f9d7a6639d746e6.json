{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import SwiperCore,{Autoplay}from'swiper';import{Swiper,SwiperSlide}from'swiper/react';import Button,{OutlineButton}from'../button/Button';import Modal,{ModalContent}from'../modal/Modal';import tmdbApi,{category,movieType}from'../../api/tmdbApi';import apiConfig from'../../api/apiConfig';import'./hero-slide.scss';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const HeroSlide=()=>{SwiperCore.use([Autoplay]);const[movieItems,setMovieItems]=useState([]);useEffect(()=>{const getMovies=async()=>{const params={page:1};try{const response=await tmdbApi.getMoviesList(movieType.popular,{params});setMovieItems(response.results.slice(1,4));console.log(response);}catch{console.log('error');}};getMovies();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"hero-slide\",children:[/*#__PURE__*/_jsx(Swiper,{modules:[Autoplay],grabCursor:true,spaceBetween:0,slidesPerView:1// autoplay={{delay: 3000}}\n,children:movieItems.map((item,i)=>/*#__PURE__*/_jsx(SwiperSlide,{children:_ref=>{let{isActive}=_ref;return/*#__PURE__*/_jsx(HeroSlideItem,{item:item,className:\"\".concat(isActive?'active':'')});}},i))}),movieItems.map((item,i)=>/*#__PURE__*/_jsx(TrailerModal,{item:item},i))]});};const HeroSlideItem=props=>{let hisrory=useNavigate();const item=props.item;const background=apiConfig.originalImage(item.backdrop_path?item.backdrop_path:item.poster_path);const setModalActive=async()=>{const modal=document.querySelector(\"#modal_\".concat(item.id));const videos=await tmdbApi.getVideos(category.movie,item.id);if(videos.results.length>0){const videSrc='https://www.youtube.com/embed/'+videos.results[0].key;modal.querySelector('.modal__content > iframe').setAttribute('src',videSrc);}else{modal.querySelector('.modal__content').innerHTML='No trailer';}modal.classList.toggle('active');};return/*#__PURE__*/_jsx(\"div\",{className:\"hero-slide__item \".concat(props.className),style:{backgroundImage:\"url(\".concat(background,\")\")},children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero-slide__item__content container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-slide__item__content__info\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:item.title}),/*#__PURE__*/_jsx(\"div\",{className:\"overview\",children:item.overview}),/*#__PURE__*/_jsxs(\"div\",{className:\"btns\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>hisrory.push('/movie/'+item.id),children:\"Watch now\"}),/*#__PURE__*/_jsx(OutlineButton,{onClick:setModalActive,children:\"Watch trailer\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hero-slide__item__content__poster\",children:/*#__PURE__*/_jsx(\"img\",{src:apiConfig.w500Image(item.poster_path),alt:\"\"})})]})});};const TrailerModal=props=>{const item=props.item;const iframeRef=useRef(null);const onClose=()=>iframeRef.current.setAttribute('src','');return/*#__PURE__*/_jsx(Modal,{active:false,id:\"modal_\".concat(item.id),children:/*#__PURE__*/_jsx(ModalContent,{onClose:onClose,children:/*#__PURE__*/_jsx(\"iframe\",{ref:iframeRef,width:\"100%\",height:\"500px\",title:\"trailer\"})})});};export default HeroSlide;","map":{"version":3,"names":["React","useState","useEffect","useRef","SwiperCore","Autoplay","Swiper","SwiperSlide","Button","OutlineButton","Modal","ModalContent","tmdbApi","category","movieType","apiConfig","useNavigate","jsx","_jsx","jsxs","_jsxs","HeroSlide","use","movieItems","setMovieItems","getMovies","params","page","response","getMoviesList","popular","results","slice","console","log","className","children","modules","grabCursor","spaceBetween","slidesPerView","map","item","i","_ref","isActive","HeroSlideItem","concat","TrailerModal","props","hisrory","background","originalImage","backdrop_path","poster_path","setModalActive","modal","document","querySelector","id","videos","getVideos","movie","length","videSrc","key","setAttribute","innerHTML","classList","toggle","style","backgroundImage","title","overview","onClick","push","src","w500Image","alt","iframeRef","onClose","current","active","ref","width","height"],"sources":["/Users/ojr/Documents/GitHub/React-Movie-Search/src/components/hero-slide/HeroSlide.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nimport SwiperCore, { Autoplay } from 'swiper';\nimport { Swiper, SwiperSlide } from 'swiper/react';\n\nimport Button, { OutlineButton } from '../button/Button';\nimport Modal, { ModalContent } from '../modal/Modal';\n\nimport tmdbApi, { category, movieType } from '../../api/tmdbApi';\nimport apiConfig from '../../api/apiConfig';\n\nimport './hero-slide.scss';\nimport { useNavigate } from 'react-router-dom';\n\nconst HeroSlide = () => {\n\n    SwiperCore.use([Autoplay]);\n\n    const [movieItems, setMovieItems] = useState([]);\n\n    useEffect(() => {\n        const getMovies = async () => {\n            const params = {page: 1}\n            try {\n                const response = await tmdbApi.getMoviesList(movieType.popular, {params});\n                setMovieItems(response.results.slice(1, 4));\n                console.log(response);\n            } catch {\n                console.log('error');\n            }\n        }\n        getMovies();\n    }, []);\n\n    return (\n        <div className=\"hero-slide\">\n            <Swiper\n                modules={[Autoplay]}\n                grabCursor={true}\n                spaceBetween={0}\n                slidesPerView={1}\n                // autoplay={{delay: 3000}}\n            >\n                {\n                    movieItems.map((item, i) => (\n                        <SwiperSlide key={i}>\n                            {({ isActive }) => (\n                                <HeroSlideItem item={item} className={`${isActive ? 'active' : ''}`} />\n                            )}\n                        </SwiperSlide>\n                    ))\n                }\n            </Swiper>\n            {\n                movieItems.map((item, i) => <TrailerModal key={i} item={item}/>)\n            }\n        </div>\n    );\n}\n\nconst HeroSlideItem = props => {\n\n    let hisrory = useNavigate();\n\n    const item = props.item;\n\n    const background = apiConfig.originalImage(item.backdrop_path ? item.backdrop_path : item.poster_path);\n\n    const setModalActive = async () => {\n        const modal = document.querySelector(`#modal_${item.id}`);\n\n        const videos = await tmdbApi.getVideos(category.movie, item.id);\n\n        if (videos.results.length > 0) {\n            const videSrc = 'https://www.youtube.com/embed/' + videos.results[0].key;\n            modal.querySelector('.modal__content > iframe').setAttribute('src', videSrc);\n        } else {\n            modal.querySelector('.modal__content').innerHTML = 'No trailer';\n        }\n\n        modal.classList.toggle('active');\n    }\n\n    return (\n        <div\n            className={`hero-slide__item ${props.className}`}\n            style={{backgroundImage: `url(${background})`}}\n        >\n            <div className=\"hero-slide__item__content container\">\n                <div className=\"hero-slide__item__content__info\">\n                    <h2 className=\"title\">{item.title}</h2>\n                    <div className=\"overview\">{item.overview}</div>\n                    <div className=\"btns\">\n                        <Button onClick={() => hisrory.push('/movie/' + item.id)}>\n                            Watch now\n                        </Button>\n                        <OutlineButton onClick={setModalActive}>\n                            Watch trailer\n                        </OutlineButton>\n                    </div>\n                </div>\n                <div className=\"hero-slide__item__content__poster\">\n                    <img src={apiConfig.w500Image(item.poster_path)} alt=\"\" />\n                </div>\n            </div>\n        </div>\n    )\n}\n\nconst TrailerModal = props => {\n    const item = props.item;\n\n    const iframeRef = useRef(null);\n\n    const onClose = () => iframeRef.current.setAttribute('src', '');\n\n    return (\n        <Modal active={false} id={`modal_${item.id}`}>\n            <ModalContent onClose={onClose}>\n                <iframe ref={iframeRef} width=\"100%\" height=\"500px\" title=\"trailer\"></iframe>\n            </ModalContent>\n        </Modal>\n    )\n}\n\nexport default HeroSlide;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}